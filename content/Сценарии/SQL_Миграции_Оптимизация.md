# 5.7. Playbook: SQL / миграции / оптимизация запросов

- **Last reviewed**: 2026-01-15
- **Уровень**: Advanced

## Когда применять

- нужно подготовить миграцию или оптимизировать запрос

## Safety (критично)

**Не передаём реальные схемы/индексы/таблицы** во внешний контур. Только обезличенные “table_A”, “col_x” и синтетика.

## Input

- обезличенная схема (таблицы/поля)
- пример запроса (обезличенный)
- цель (latency, throughput, cost)

## Output

- вариант SQL/миграции
- rollback‑скрипт
- чек‑лист проверки (EXPLAIN, нагрузка, блокировки)

## Template prompt

> Дам обезличенную схему и запрос.  
> Сгенерируй оптимизацию + миграцию (если нужно) + rollback + чек‑лист проверки.  
> Не проси реальную схему/индексы.

