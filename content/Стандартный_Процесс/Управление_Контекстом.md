# 4.4. Управление контекстом: какие файлы давать, как резать контекст, как "не слить"

- **Last reviewed**: 2026-01-15
- **Уровень**: Basic → Advanced

## Зачем эта страница

Большинство провалов с агентами — это не "плохая модель", а плохой контекст: слишком много мусора, слишком мало ограничений, слишком высокий риск утечки.

## Иерархия контекста (рекомендуемая)

1. **AGENTS.md / общие правила проекта** (постоянный контекст)
2. **Модульные инструкции** (rules по папкам/сервисам)
3. **Task Context Pack** (конкретная задача: цель, AC, файлы, ограничения)
4. **Факты для проверки** (логи, payload, тест‑кейсы) — в обезличенном виде

## "Контекст‑диета" (чек‑лист)

- Дайте агенту **только то, что нужно** для решения задачи.
- Предпочитайте "указатели" вместо "дампинга":
  - "файл X, функция Y, строка вокруг Z"
  - "команда/путь, где искать"
- Сжимайте большие артефакты (логи/трейсы):
  - top errors
  - 20–50 строк контекста вокруг
  - тайм‑диапазон и correlation id (обезличено)
- Фиксируйте запреты:
  - "не трогать auth/db/crypto/CI"
  - "без новых зависимостей"
  - "не выходить за папку X"

## Работа "через тулинг", а не через копипасту

Если агент умеет искать по репо (grep/поиск/индексация), лучше:

- дать цель + ограничения,
- разрешить ему **найти** релевантные файлы,
- затем попросить план и патч.

Так вы меньше "льёте" контекст в чат и снижаете риск утечек.

## Связанные страницы

- [6.4 Safe prompting & redaction](../Безопасность_Соответствие/Безопасный_Промптинг_Редактирование.md)
- [2.3 RAG и внутренние знания](../Основы/RAG_Внутренние_Знания.md)
- [3.4 Стандарты контекст‑инструкций](../Инструменты/Контекст_Инструкции_Стандарты.md)

